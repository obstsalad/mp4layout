
<!DOCTYPE html>
<html>

<head>
    <title>Layout of text0.mp4</title>
</head>

<body>
    <center>
        <textarea id="out" rows="40" cols="120">Parsing layout of MP4 file ...</textarea>
    </center>
    <script src="mp4layout.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        window.onload = function(e) {
            var mp4uri = "http://demo.castlabs.com/tmp/text0.mp4";
            mp4layoutFct(mp4uri, function(err, boxes, payload) {
                if (err) {
                    console.log('error : ' + err);
                } else {                    
                    boxes.text = "Successfully loaded file " + mp4uri + "\n";
                    boxes.text += "\n";
                    for (var i = 0; i < boxes.length; i++) {
                        boxes.text +=  "Found box of type " + boxes[i].name + " and size " + boxes[i].length + "\n";
                    }
                    boxes.text += "\n";
                    boxes.text += "Content of mdat box is: " + payload;

                    document.querySelector('#out').innerHTML = boxes.text;
                }
            });
        }
    </script>
</body>

</html>
